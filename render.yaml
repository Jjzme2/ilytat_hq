# ---------------------------------------------------------------
# Render Blueprint â€“ HQ.ILYTAT.com (Nuxt 3 SSR)
# Docs: https://docs.render.com/blueprint-spec
# ---------------------------------------------------------------

services:
  - type: web
    name: ilytat-hq
    runtime: node
    region: oregon

    # Build
    buildCommand: npm install && npm run build
    startCommand: node .output/server/index.mjs

    # Environment
    envVars:
      # Node
      - key: NODE_VERSION
        value: "20"

      # Firebase Client
      - key: FIREBASE_API_KEY
        sync: false
      - key: FIREBASE_AUTH_DOMAIN
        sync: false
      - key: FIREBASE_PROJECT_ID
        sync: false
      - key: FIREBASE_STORAGE_BUCKET
        sync: false
      - key: FIREBASE_MESSAGING_SENDER_ID
        sync: false
      - key: FIREBASE_APP_ID
        sync: false

      # Firebase Admin SDK (server-only)
      - key: GOOGLE_APPLICATION_CREDENTIALS
        sync: false
      - key: FIREBASE_ADMIN_PRIVATE_KEY
        sync: false
      - key: FIREBASE_ADMIN_CLIENT_EMAIL
        sync: false

      # Cloudflare R2 (server-only)
      - key: CLOUDFLARE_R2_ACCESS_KEY_ID
        sync: false
      - key: CLOUDFLARE_R2_SECRET_ACCESS_KEY
        sync: false
      - key: CLOUDFLARE_R2_ACCOUNT_ID
        sync: false
      - key: CLOUDFLARE_R2_BUCKET_NAME
        sync: false

    # Health check
    healthCheckPath: /
